<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weight-Based Products Guide | CNPERP</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        body { background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%); min-height: 100vh; padding: 20px; }
        .help-container { max-width: 1400px; margin: 0 auto; background: white; border-radius: 15px; box-shadow: 0 10px 40px rgba(0,0,0,0.2); overflow: hidden; }
        .help-header { background: linear-gradient(135deg, #ff9a9e, #fecfef); color: #333; padding: 3rem 2rem; text-align: center; }
        .help-header h1 { font-size: 2.5rem; font-weight: bold; margin-bottom: 0.5rem; }
        .help-content { padding: 3rem; }
        .section { margin-bottom: 3rem; }
        .section h2 { color: #ff9a9e; font-weight: bold; margin-bottom: 1.5rem; padding-bottom: 0.5rem; border-bottom: 3px solid #fecfef; }
        .feature-card { background: #fff5f9; border-left: 4px solid #ff9a9e; padding: 1.5rem; margin-bottom: 1rem; border-radius: 8px; }
        .code-block { background: #2d2d2d; color: #f8f8f2; padding: 1.5rem; border-radius: 8px; font-family: 'Courier New', monospace; margin: 1rem 0; overflow-x: auto; }
        .nav-buttons { display: flex; justify-content: space-between; margin-top: 3rem; padding-top: 2rem; border-top: 2px solid #dee2e6; }
        ul.check-list { list-style: none; padding-left: 0; }
        ul.check-list li { padding: 0.5rem 0; padding-left: 2rem; position: relative; }
        ul.check-list li:before { content: "✓"; position: absolute; left: 0; color: #28a745; font-weight: bold; font-size: 1.2rem; }
    </style>
</head>
<body>
    <div class="help-container">
        <div class="help-header">
            <h1><i class="bi bi-upc-scan me-3"></i>Weight-Based Products</h1>
            <p class="lead">Selling Products by Weight with EAN-13 Barcodes</p>
        </div>

        <div class="help-content">
            <div class="section">
                <h2><i class="bi bi-info-circle-fill me-2"></i>Overview</h2>
                <p class="lead">Complete implementation for selling products by weight (meat, fruits, vegetables, dairy, bakery) using EAN-13 barcodes that encode both product identity and weight.</p>
                
                <div class="alert alert-primary">
                    <h5><i class="bi bi-diagram-3 me-2"></i>Barcode Format</h5>
                    <div class="code-block">
<strong>Format:</strong> [Type:2][Product:5][Weight:5][Check:1] = 13 digits

<strong>Example:</strong> 2012345015007
  ├── 20: Meat type
  ├── 12345: Product ID
  ├── 01500: Weight in grams (1.5kg)
  └── 7: Check digit
                    </div>
                </div>
            </div>

            <div class="section">
                <h2><i class="bi bi-star-fill text-warning me-2"></i>Key Features</h2>
                
                <div class="row">
                    <div class="col-md-6">
                        <div class="feature-card">
                            <h4><i class="bi bi-upc text-primary me-2"></i>EAN-13 Barcode Support</h4>
                            <ul class="check-list">
                                <li>Automatic barcode generation</li>
                                <li>Weight encoding in barcode</li>
                                <li>Modulo-10 checksum validation</li>
                                <li>Standard EAN-13 format compatibility</li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="feature-card">
                            <h4><i class="bi bi-box-seam text-success me-2"></i>Product Types</h4>
                            <ul class="check-list">
                                <li><strong>Type 20:</strong> Meat & Poultry</li>
                                <li><strong>Type 21:</strong> Fruits & Vegetables</li>
                                <li><strong>Type 22:</strong> Dairy Products</li>
                                <li><strong>Type 23:</strong> Bakery Items</li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="feature-card">
                            <h4><i class="bi bi-calculator text-info me-2"></i>Price Calculation</h4>
                            <ul class="check-list">
                                <li>Automatic price per weight unit</li>
                                <li>Tare weight deduction support</li>
                                <li>Real-time price updates</li>
                                <li>Multiple unit support (kg, g, lbs)</li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="feature-card">
                            <h4><i class="bi bi-speedometer2 text-warning me-2"></i>Scale Integration</h4>
                            <ul class="check-list">
                                <li>Label-printing scales support</li>
                                <li>External printer integration</li>
                                <li>Android/Tablet solutions</li>
                                <li>PC-based POS integration</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2><i class="bi bi-gear me-2"></i>System Setup</h2>
                
                <h3>Step 1: Database Migration</h3>
                <div class="code-block">
# Run the migration script
python add_weight_based_products.py

# This adds 8 new fields to products table:
- is_weight_based (boolean)
- weight_barcode_type (integer 20-23)
- weight_price_per_unit (decimal)
- weight_unit (varchar: kg, g, lbs)
- weight_tare (decimal)
- weight_barcode_prefix (varchar)
- weight_min_weight (decimal)
- weight_max_weight (decimal)
                </div>

                <h3>Step 2: Create Weight-Based Products</h3>
                <div class="alert alert-light border-start border-primary border-4">
                    <ol>
                        <li class="mb-2">Go to <strong>Products Management</strong></li>
                        <li class="mb-2">Click <strong>"Add New Product"</strong></li>
                        <li class="mb-2">Check <strong>"Weight-Based Product"</strong> checkbox</li>
                        <li class="mb-2">Select <strong>Barcode Type</strong> (20-23)</li>
                        <li class="mb-2">Enter <strong>Price Per Unit</strong> (e.g., P50/kg)</li>
                        <li class="mb-2">Select <strong>Weight Unit</strong> (kg, g, lbs)</li>
                        <li class="mb-2">Set <strong>Tare Weight</strong> if needed (e.g., 10g for packaging)</li>
                        <li class="mb-2">Save the product</li>
                    </ol>
                </div>

                <h3>Step 3: Configure Scale</h3>
                <div class="feature-card">
                    <h5><i class="bi bi-tools me-2"></i>Scale Configuration Steps</h5>
                    <ol>
                        <li>Program product database into scale</li>
                        <li>Set barcode format to EAN-13</li>
                        <li>Configure price per unit</li>
                        <li>Set tare weight if applicable</li>
                        <li>Test barcode generation</li>
                    </ol>
                    <p class="text-muted small mb-0 mt-2">
                        <i class="bi bi-info-circle me-1"></i>
                        Refer to <strong>SCALE_CONFIGURATION_TEMPLATES.md</strong> for detailed instructions per scale model
                    </p>
                </div>
            </div>

            <div class="section">
                <h2><i class="bi bi-list-check me-2"></i>Supported Scale Types</h2>
                
                <div class="row">
                    <div class="col-md-6">
                        <div class="card border-primary mb-3">
                            <div class="card-header bg-primary text-white">
                                <i class="bi bi-printer me-2"></i>Label-Printing Scales
                            </div>
                            <div class="card-body">
                                <ul class="small">
                                    <li><strong>Bizerba GLMI-800:</strong> Web interface configuration</li>
                                    <li><strong>CAS CL-5000 Series:</strong> Keypad programming</li>
                                    <li><strong>Toledo 8530:</strong> Touchscreen interface</li>
                                    <li><strong>Avery Berkel HL122:</strong> Keypad config</li>
                                    <li><strong>Digi SM-300:</strong> Network software</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card border-success mb-3">
                            <div class="card-header bg-success text-white">
                                <i class="bi bi-phone me-2"></i>Alternative Solutions
                            </div>
                            <div class="card-body">
                                <ul class="small">
                                    <li><strong>Scale + Printer:</strong> Any scale with external printer</li>
                                    <li><strong>Android/Tablet:</strong> Mobile barcode generation apps</li>
                                    <li><strong>PC-POS:</strong> Computer-based POS integration</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2><i class="bi bi-cart me-2"></i>Point of Sale Usage</h2>
                
                <h3>Scanning Weight-Based Products</h3>
                <div class="alert alert-light border-start border-success border-4">
                    <ol>
                        <li class="mb-2"><strong>Weigh the product:</strong> Place item on scale</li>
                        <li class="mb-2"><strong>Generate label:</strong> Scale prints barcode label with weight</li>
                        <li class="mb-2"><strong>Scan at POS:</strong> Scan the barcode at checkout</li>
                        <li class="mb-2"><strong>Auto-calculation:</strong> System decodes weight and calculates price</li>
                        <li class="mb-2"><strong>Complete sale:</strong> Price displayed automatically</li>
                    </ol>
                </div>

                <h3>Example Transaction</h3>
                <div class="code-block">
<strong>Product:</strong> Beef Steak (Type 20)
<strong>Price:</strong> P250/kg
<strong>Barcode Scanned:</strong> 2012345015007

<strong>System Decodes:</strong>
├── Type: 20 (Meat)
├── Product ID: 12345
├── Weight: 01500g (1.5kg)
└── Check: 7 ✓

<strong>Calculation:</strong>
Weight: 1.5kg
Price/kg: P250
Tare: 0kg
<strong>Total: P375.00</strong>
                </div>
            </div>

            <div class="section">
                <h2><i class="bi bi-file-earmark-code me-2"></i>API Endpoints</h2>
                
                <table class="table table-striped">
                    <thead class="table-dark">
                        <tr>
                            <th>Method</th>
                            <th>Endpoint</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span class="badge bg-primary">POST</span></td>
                            <td><code>/api/v1/weight-products/parse-barcode</code></td>
                            <td>Decode barcode and return product with price</td>
                        </tr>
                        <tr>
                            <td><span class="badge bg-primary">POST</span></td>
                            <td><code>/api/v1/weight-products/generate-barcode</code></td>
                            <td>Generate barcode for product and weight</td>
                        </tr>
                        <tr>
                            <td><span class="badge bg-success">GET</span></td>
                            <td><code>/api/v1/weight-products/</code></td>
                            <td>List all weight-based products</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="section">
                <h2><i class="bi bi-lightbulb-fill text-warning me-2"></i>Best Practices</h2>
                
                <div class="row">
                    <div class="col-md-4">
                        <div class="card border-primary mb-3">
                            <div class="card-header bg-primary text-white">
                                <i class="bi bi-check-circle me-2"></i>Product Setup
                            </div>
                            <div class="card-body">
                                <ul class="small">
                                    <li>Use consistent barcode types per category</li>
                                    <li>Set realistic min/max weights</li>
                                    <li>Include tare weight for packaging</li>
                                    <li>Test barcodes before going live</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card border-success mb-3">
                            <div class="card-header bg-success text-white">
                                <i class="bi bi-people me-2"></i>Staff Training
                            </div>
                            <div class="card-body">
                                <ul class="small">
                                    <li>Train on proper weighing technique</li>
                                    <li>Explain barcode validation</li>
                                    <li>Practice with test products</li>
                                    <li>Keep quick reference cards handy</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card border-info mb-3">
                            <div class="card-header bg-info text-white">
                                <i class="bi bi-tools me-2"></i>Maintenance
                            </div>
                            <div class="card-body">
                                <ul class="small">
                                    <li>Calibrate scales regularly</li>
                                    <li>Update product prices as needed</li>
                                    <li>Check label printer supplies</li>
                                    <li>Verify barcode readability</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="nav-buttons">
                <a href="/static/help-center.html" class="btn btn-outline-primary btn-lg">
                    <i class="bi bi-arrow-left me-2"></i>Back to Help Center
                </a>
                <a href="/static/products.html" class="btn btn-primary btn-lg">
                    <i class="bi bi-box-seam me-2"></i>Manage Products
                </a>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>