<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dimensional Financial Reports - CNPERP</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        .report-card {
            transition: transform 0.2s, box-shadow 0.2s;
            border: none;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .report-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }

        .report-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .dimension-filter {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .report-section {
            display: none;
        }

        .report-section.active {
            display: block;
        }

        .chart-container {
            height: 400px;
            margin: 1rem 0;
        }

        .summary-metric {
            text-align: center;
            padding: 1rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 8px;
            margin-bottom: 1rem;
        }

        .table-container {
            max-height: 500px;
            overflow-y: auto;
        }

        .loading-spinner {
            display: none;
            text-align: center;
            padding: 2rem;
        }

        .export-buttons {
            margin-bottom: 1rem;
        }

        .dimension-badge {
            background: #e3f2fd;
            color: #1976d2;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.85rem;
            margin-right: 0.5rem;
        }
    </style>
</head>

<body>
    <div class="container-fluid mt-4">
        <div class="row">
            <div class="col-12">
                <h1 class="mb-4">
                    <i class="fas fa-chart-line me-2"></i>
                    Dimensional Financial Reports
                </h1>
            </div>
        </div>

        <!-- Global Dimension Filters -->
        <div class="dimension-filter">
            <h5><i class="fas fa-filter me-2"></i>Global Filters</h5>
            <div class="row">
                <div class="col-md-3">
                    <label class="form-label">Date Range</label>
                    <div class="input-group">
                        <input type="date" id="startDate" class="form-control">
                        <input type="date" id="endDate" class="form-control">
                    </div>
                </div>
                <div class="col-md-3">
                    <label class="form-label">Cost Center</label>
                    <select id="costCenterFilter" class="form-select">
                        <option value="">All Cost Centers</option>
                    </select>
                </div>
                <div class="col-md-3">
                    <label class="form-label">Project</label>
                    <select id="projectFilter" class="form-select">
                        <option value="">All Projects</option>
                    </select>
                </div>
                <div class="col-md-3">
                    <label class="form-label">Additional Dimensions</label>
                    <select id="additionalDimensionsFilter" class="form-select" multiple>
                    </select>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col-12">
                    <button type="button" class="btn btn-primary" onclick="applyGlobalFilters()">
                        <i class="fas fa-search me-2"></i>Apply Filters
                    </button>
                    <button type="button" class="btn btn-outline-secondary ms-2" onclick="clearFilters()">
                        <i class="fas fa-times me-2"></i>Clear Filters
                    </button>
                </div>
            </div>
        </div>

        <!-- Report Type Selection -->
        <div class="row mb-4">
            <div class="col-md-2">
                <div class="card report-card h-100" onclick="showReport('profit-loss')">
                    <div class="card-body text-center">
                        <i class="fas fa-chart-bar report-icon text-success"></i>
                        <h6>Profit & Loss</h6>
                        <small class="text-muted">P&L with dimensions</small>
                    </div>
                </div>
            </div>
            <div class="col-md-2">
                <div class="card report-card h-100" onclick="showReport('balance-sheet')">
                    <div class="card-body text-center">
                        <i class="fas fa-balance-scale report-icon text-primary"></i>
                        <h6>Balance Sheet</h6>
                        <small class="text-muted">Assets & Liabilities</small>
                    </div>
                </div>
            </div>
            <div class="col-md-2">
                <div class="card report-card h-100" onclick="showReport('general-ledger')">
                    <div class="card-body text-center">
                        <i class="fas fa-book report-icon text-info"></i>
                        <h6>General Ledger</h6>
                        <small class="text-muted">Detailed transactions</small>
                    </div>
                </div>
            </div>
            <div class="col-md-2">
                <div class="card report-card h-100" onclick="showReport('debtors-analysis')">
                    <div class="card-body text-center">
                        <i class="fas fa-user-plus report-icon text-warning"></i>
                        <h6>Debtors Analysis</h6>
                        <small class="text-muted">Receivables aging</small>
                    </div>
                </div>
            </div>
            <div class="col-md-2">
                <div class="card report-card h-100" onclick="showReport('creditors-analysis')">
                    <div class="card-body text-center">
                        <i class="fas fa-user-minus report-icon text-danger"></i>
                        <h6>Creditors Analysis</h6>
                        <small class="text-muted">Payables aging</small>
                    </div>
                </div>
            </div>
            <div class="col-md-2">
                <div class="card report-card h-100" onclick="showReport('sales-analysis')">
                    <div class="card-body text-center">
                        <i class="fas fa-shopping-cart report-icon text-success"></i>
                        <h6>Sales Analysis</h6>
                        <small class="text-muted">Revenue breakdown</small>
                    </div>
                </div>
            </div>
        </div>

        <!-- Additional Report Types Row -->
        <div class="row mb-4">
            <div class="col-md-2">
                <div class="card report-card h-100" onclick="showReport('purchases-analysis')">
                    <div class="card-body text-center">
                        <i class="fas fa-shopping-bag report-icon text-purple"></i>
                        <h6>Purchases Analysis</h6>
                        <small class="text-muted">Expense breakdown</small>
                    </div>
                </div>
            </div>
            <div class="col-md-2">
                <div class="card report-card h-100" onclick="showReport('comparative-analysis')">
                    <div class="card-body text-center">
                        <i class="fas fa-chart-line report-icon text-info"></i>
                        <h6>Comparative Analysis</h6>
                        <small class="text-muted">Period comparison</small>
                    </div>
                </div>
            </div>
            <div class="col-md-2">
                <div class="card report-card h-100" onclick="showReport('dashboard-summary')">
                    <div class="card-body text-center">
                        <i class="fas fa-tachometer-alt report-icon text-dark"></i>
                        <h6>Dashboard</h6>
                        <small class="text-muted">Executive summary</small>
                    </div>
                </div>
            </div>
        </div>

        <!-- Loading Spinner -->
        <div class="loading-spinner" id="loadingSpinner">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
            <p class="mt-2">Generating report...</p>
        </div>

        <!-- Profit & Loss Report Section -->
        <div id="profit-loss-section" class="report-section">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5><i class="fas fa-chart-bar me-2"></i>Profit & Loss Statement</h5>
                    <div class="export-buttons">
                        <button class="btn btn-sm btn-outline-success" onclick="exportReport('profit-loss', 'excel')">
                            <i class="fas fa-file-excel me-1"></i>Excel
                        </button>
                        <button class="btn btn-sm btn-outline-danger" onclick="exportReport('profit-loss', 'pdf')">
                            <i class="fas fa-file-pdf me-1"></i>PDF
                        </button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="row mb-3">
                        <div class="col-md-3">
                            <div class="summary-metric">
                                <h6>Total Revenue</h6>
                                <h4 id="pl-revenue">-</h4>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="summary-metric">
                                <h6>Total Expenses</h6>
                                <h4 id="pl-expenses">-</h4>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="summary-metric">
                                <h6>Gross Profit</h6>
                                <h4 id="pl-gross-profit">-</h4>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="summary-metric">
                                <h6>Net Profit</h6>
                                <h4 id="pl-net-profit">-</h4>
                            </div>
                        </div>
                    </div>
                    <div class="table-container">
                        <table class="table table-striped" id="pl-table">
                            <thead class="table-dark">
                                <tr>
                                    <th>Account</th>
                                    <th>Cost Center</th>
                                    <th>Project</th>
                                    <th>Amount</th>
                                    <th>% of Revenue</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Balance Sheet Report Section -->
        <div id="balance-sheet-section" class="report-section">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5><i class="fas fa-balance-scale me-2"></i>Balance Sheet</h5>
                    <div class="export-buttons">
                        <button class="btn btn-sm btn-outline-success" onclick="exportReport('balance-sheet', 'excel')">
                            <i class="fas fa-file-excel me-1"></i>Excel
                        </button>
                        <button class="btn btn-sm btn-outline-danger" onclick="exportReport('balance-sheet', 'pdf')">
                            <i class="fas fa-file-pdf me-1"></i>PDF
                        </button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <div class="summary-metric">
                                <h6>Total Assets</h6>
                                <h4 id="bs-assets">-</h4>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="summary-metric">
                                <h6>Total Liabilities</h6>
                                <h4 id="bs-liabilities">-</h4>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="summary-metric">
                                <h6>Total Equity</h6>
                                <h4 id="bs-equity">-</h4>
                            </div>
                        </div>
                    </div>
                    <div class="table-container">
                        <table class="table table-striped" id="bs-table">
                            <thead class="table-dark">
                                <tr>
                                    <th>Account Category</th>
                                    <th>Account</th>
                                    <th>Dimensions</th>
                                    <th>Amount</th>
                                    <th>% of Total</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- General Ledger Report Section -->
        <div id="general-ledger-section" class="report-section">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5><i class="fas fa-book me-2"></i>General Ledger</h5>
                    <div class="export-buttons">
                        <button class="btn btn-sm btn-outline-success"
                            onclick="exportReport('general-ledger', 'excel')">
                            <i class="fas fa-file-excel me-1"></i>Excel
                        </button>
                        <button class="btn btn-sm btn-outline-danger" onclick="exportReport('general-ledger', 'pdf')">
                            <i class="fas fa-file-pdf me-1"></i>PDF
                        </button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="table-container">
                        <table class="table table-striped" id="gl-table">
                            <thead class="table-dark">
                                <tr>
                                    <th>Date</th>
                                    <th>Account</th>
                                    <th>Description</th>
                                    <th>Cost Center</th>
                                    <th>Project</th>
                                    <th>Debit</th>
                                    <th>Credit</th>
                                    <th>Balance</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Debtors Analysis Report Section -->
        <div id="debtors-analysis-section" class="report-section">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5><i class="fas fa-user-plus me-2"></i>Debtors Analysis</h5>
                    <div class="export-buttons">
                        <button class="btn btn-sm btn-outline-success"
                            onclick="exportReport('debtors-analysis', 'excel')">
                            <i class="fas fa-file-excel me-1"></i>Excel
                        </button>
                        <button class="btn btn-sm btn-outline-danger" onclick="exportReport('debtors-analysis', 'pdf')">
                            <i class="fas fa-file-pdf me-1"></i>PDF
                        </button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="row mb-3">
                        <div class="col-md-3">
                            <div class="summary-metric">
                                <h6>Total Outstanding</h6>
                                <h4 id="debtors-total">-</h4>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="summary-metric">
                                <h6>Current (0-30 days)</h6>
                                <h4 id="debtors-current">-</h4>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="summary-metric">
                                <h6>Overdue (31-90 days)</h6>
                                <h4 id="debtors-overdue">-</h4>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="summary-metric">
                                <h6>Long Overdue (90+ days)</h6>
                                <h4 id="debtors-long-overdue">-</h4>
                            </div>
                        </div>
                    </div>
                    <div class="table-container">
                        <table class="table table-striped" id="debtors-table">
                            <thead class="table-dark">
                                <tr>
                                    <th>Customer</th>
                                    <th>Cost Center</th>
                                    <th>Project</th>
                                    <th>Current</th>
                                    <th>31-60 Days</th>
                                    <th>61-90 Days</th>
                                    <th>90+ Days</th>
                                    <th>Total</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Similar sections for other reports... -->
        <!-- For brevity, I'll include placeholders for the remaining reports -->

        <!-- Creditors Analysis Report Section -->
        <div id="creditors-analysis-section" class="report-section">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5><i class="fas fa-user-minus me-2"></i>Creditors Analysis</h5>
                    <div class="export-buttons">
                        <button class="btn btn-sm btn-outline-success"
                            onclick="exportReport('creditors-analysis', 'excel')">
                            <i class="fas fa-file-excel me-1"></i>Excel
                        </button>
                        <button class="btn btn-sm btn-outline-danger"
                            onclick="exportReport('creditors-analysis', 'pdf')">
                            <i class="fas fa-file-pdf me-1"></i>PDF
                        </button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="table-container">
                        <table class="table table-striped" id="creditors-table">
                            <thead class="table-dark">
                                <tr>
                                    <th>Supplier</th>
                                    <th>Cost Center</th>
                                    <th>Project</th>
                                    <th>Current</th>
                                    <th>31-60 Days</th>
                                    <th>61-90 Days</th>
                                    <th>90+ Days</th>
                                    <th>Total</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sales Analysis Report Section -->
        <div id="sales-analysis-section" class="report-section">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5><i class="fas fa-shopping-cart me-2"></i>Sales Analysis</h5>
                    <div class="export-buttons">
                        <button class="btn btn-sm btn-outline-success"
                            onclick="exportReport('sales-analysis', 'excel')">
                            <i class="fas fa-file-excel me-1"></i>Excel
                        </button>
                        <button class="btn btn-sm btn-outline-danger" onclick="exportReport('sales-analysis', 'pdf')">
                            <i class="fas fa-file-pdf me-1"></i>PDF
                        </button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="table-container">
                        <table class="table table-striped" id="sales-table">
                            <thead class="table-dark">
                                <tr>
                                    <th>Period</th>
                                    <th>Product/Service</th>
                                    <th>Cost Center</th>
                                    <th>Project</th>
                                    <th>Quantity</th>
                                    <th>Revenue</th>
                                    <th>Growth %</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Dashboard Summary Section -->
        <div id="dashboard-summary-section" class="report-section">
            <div class="card">
                <div class="card-header">
                    <h5><i class="fas fa-tachometer-alt me-2"></i>Executive Dashboard</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h6>Key Financial Metrics</h6>
                            <div class="chart-container" id="dashboard-metrics-chart"></div>
                        </div>
                        <div class="col-md-6">
                            <h6>Dimensional Performance</h6>
                            <div class="chart-container" id="dashboard-dimensions-chart"></div>
                        </div>
                    </div>
                    <div class="row mt-4">
                        <div class="col-12">
                            <h6>Quick Summary</h6>
                            <div id="dashboard-summary-content"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/dimensional-reports.js"></script>
</body>

</html>
